<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>A4Tech & Bloody Store</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* === Original look preserved === */
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
body{background:#f5f5f5;color:#333;line-height:1.6}
.container{max-width:1200px;margin:0 auto;padding:0 20px}
header{background:#00AEEF;color:#fff;padding:15px 0;box-shadow:0 4px 12px rgba(0,0,0,0.1);position:sticky;top:0;z-index:100}
.header-content{display:flex;justify-content:space-between;align-items:center}
h1{font-size:1.8rem;font-weight:600}
.cart-icon{position:relative;font-size:1.5rem;cursor:pointer;padding:10px;border-radius:50%;background:rgba(255,255,255,0.2);width:50px;height:50px;display:flex;align-items:center;justify-content:center}
.cart-count{position:absolute;top:-5px;right:-5px;background:#ff4757;color:#fff;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;font-size:.8rem;font-weight:bold}
.controls{display:flex;justify-content:space-between;margin:20px 0;background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.05)}
.view-toggle{display:flex;gap:10px}
.view-btn{padding:8px 15px;border:1px solid #ddd;background:#fff;border-radius:5px;cursor:pointer}
.view-btn.active{background:#25D366;color:#fff;border-color:#25D366}
.search-box{padding:8px 15px;border:1px solid #ddd;border-radius:5px;width:250px}
.categories{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}
.category-btn{padding:8px 15px;border:1px solid #ddd;background:#fff;border-radius:5px;cursor:pointer}
.category-btn.active{background:#2575fc;color:#fff;border-color:#2575fc}
.products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:25px;margin-bottom:40px}
.product-card{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,0.05);transition:.3s;display:flex;flex-direction:column;height:100%}
.product-card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,0.1)}
.product-image{height:250px;width:100%;object-fit:cover}
.product-info{padding:20px;flex:1;display:flex;flex-direction:column}
.product-title{font-size:1.2rem;margin-bottom:10px}
.product-description{color:#666;font-size:.9rem;margin-bottom:10px;flex:1}
.product-price{font-size:1.3rem;font-weight:700;color:#25D366;margin-bottom:15px}
.add-to-cart{background:#25D366;color:#fff;border:none;padding:10px 15px;border-radius:5px;cursor:pointer;width:100%;font-weight:600}
.add-to-cart:hover{background:#128C7E}
.out-of-stock{background:#ff4757;color:#fff;border:none;padding:10px 15px;border-radius:5px;width:100%;font-weight:600}
.floating-cart-btn{position:fixed;right:20px;bottom:20px;background:#25D366;color:#fff;border:none;padding:15px 20px;border-radius:50px;box-shadow:0 5px 15px rgba(0,0,0,0.2);cursor:pointer;font-weight:600;display:flex;align-items:center;gap:8px;z-index:99}
.floating-cart-btn:hover{background:#128C7E}
.cart-popup{position:fixed;top:0;right:-420px;width:100%;max-width:400px;height:100vh;background:#fff;box-shadow:-5px 0 15px rgba(0,0,0,0.1);transition:right .4s ease;z-index:1000;display:flex;flex-direction:column}
.cart-popup.active{right:0}
.cart-header{padding:20px;background:#25D366;color:#fff;display:flex;justify-content:space-between;align-items:center}
.cart-items{flex:1;overflow-y:auto;padding:20px}
.cart-footer{padding:20px;border-top:1px solid #eee}
.cart-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}
.checkout-btn{background:#25D366;color:#fff;border:none;padding:12px;border-radius:6px;width:100%;font-weight:600;cursor:pointer}
.checkout-btn:hover{background:#128C7E}
.overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:999;display:none}
.overlay.active{display:block}
.success-message,.error-message{padding:10px;margin:10px; border-radius:5px;color:#fff;text-align:center}
.success-message{background:#1dd1a1}
.error-message{background:#ff6b6b}
@media (max-width:768px){.product-image{height:180px}}
</style>
</head>
<body>
<header>
  <div class="container header-content">
    <h1>A4Tech & Bloody Store</h1>
    <div style="display:flex;align-items:center;gap:12px;">
      <button id="refreshBtn" style="background:white;color:#00AEEF;border:none;padding:8px 12px;border-radius:5px;cursor:pointer;font-weight:600"><i class="fas fa-sync-alt"></i> Refresh</button>
      <div class="cart-icon" id="cartIcon"><i class="fas fa-shopping-cart"></i><div class="cart-count" id="cartCount">0</div></div>
    </div>
  </div>
</header>

<div class="container">
  <div class="controls">
    <div class="view-toggle">
      <button class="view-btn active" id="gridViewBtn"><i class="fas fa-th"></i> Grid</button>
      <button class="view-btn" id="listViewBtn"><i class="fas fa-list"></i> List</button>
    </div>
    <input id="searchBox" class="search-box" placeholder="Search products...">
  </div>

  <div class="categories" id="categories"></div>
  <div class="products-grid" id="productsGrid"></div>
</div>

<div class="overlay" id="overlay"></div>

<div class="cart-popup" id="cartPopup">
  <div class="cart-header">
    <h2>Your Cart</h2>
    <button id="closeCart" style="background:none;border:none;color:white;font-size:1.3rem;cursor:pointer"><i class="fas fa-times"></i></button>
  </div>
  <div class="cart-items" id="cartItems"></div>
  <div class="cart-footer">
    <div style="display:flex;justify-content:space-between;font-weight:700;margin-bottom:10px"><span>Total:</span><span id="cartTotal">Rs. 0</span></div>
    <button id="checkoutBtn" class="checkout-btn"><i class="fab fa-whatsapp"></i> Checkout via WhatsApp</button>
  </div>
</div>

<button class="floating-cart-btn" id="floatingCartBtn"><i class="fas fa-shopping-cart"></i> <span id="floatingCartTotal">Rs. 0</span></button>

<script>
/* ======================
   HARD-CODED PRODUCTS
   ====================== */
const products = [
  {
    id: 101,
    name: "A4Tech X7 Gaming Mouse",
    price: 2200,
    image: "https://via.placeholder.com/400x300?text=A4Tech+X7",
    description: "High-precision optical sensor with ergonomic design.",
    brand: "A4Tech",
    category: "Mouse",
    stock: "yes"
  },
  {
    id: 102,
    name: "Bloody H540 Wired Headset (ANC)",
    price: 4200,
    image: "https://via.placeholder.com/400x300?text=Bloody+H540",
    description: "Wired gaming headset with ANC and crystal mic.",
    brand: "Bloody",
    category: "Headset",
    stock: "yes"
  },
  {
    id: 103,
    name: "A4Tech Full HD Webcam",
    price: 3500,
    image: "https://via.placeholder.com/400x300?text=Webcam+1080p",
    description: "1080p webcam with auto-focus and built-in mic.",
    brand: "A4Tech",
    category: "Webcam",
    stock: "yes"
  },
  {
    id: 104,
    name: "Bloody Mechanical Keyboard K700",
    price: 5200,
    image: "https://via.placeholder.com/400x300?text=K700+Keyboard",
    description: "Compact mechanical keyboard with RGB backlight.",
    brand: "Bloody",
    category: "Keyboard",
    stock: "yes"
  }
];

/* ======================
   APP LOGIC (unchanged design)
   ====================== */
const PHONE = '923332200318'; // WhatsApp number (no +)
let cart = [];
let currentView = 'grid';

const productsGrid = document.getElementById('productsGrid');
const categoriesWrap = document.getElementById('categories');
const searchBox = document.getElementById('searchBox');
const cartPopup = document.getElementById('cartPopup');
const overlay = document.getElementById('overlay');
const cartItemsEl = document.getElementById('cartItems');
const cartCountEl = document.getElementById('cartCount');
const cartTotalEl = document.getElementById('cartTotal');
const floatingTotalEl = document.getElementById('floatingCartTotal');

function init(){
  renderCategories();
  renderProducts(products);
  setupEvents();
  updateCartUI();
}

function renderCategories(){
  // unique brands & categories
  const brands = [...new Set(products.map(p=>p.brand))];
  const cats = [...new Set(products.map(p=>p.category))];
  let html = `<button class="category-btn active" data-filter="all">All</button>`;
  brands.forEach(b => html += `<button class="category-btn" data-filter="${b}">${b}</button>`);
  cats.forEach(c => html += `<button class="category-btn" data-filter="${c}">${c}</button>`);
  categoriesWrap.innerHTML = html;
  document.querySelectorAll('.category-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.category-btn').forEach(x=>x.classList.remove('active'));
      btn.classList.add('active');
      const f = btn.dataset.filter;
      applyFilter(f);
    });
  });
}

function applyFilter(filter){
  let list = products;
  const q = (searchBox.value || '').toLowerCase();
  if(filter && filter !== 'all') list = products.filter(p => p.brand === filter || p.category === filter);
  if(q) list = list.filter(p => (p.name||'').toLowerCase().includes(q) || (p.description||'').toLowerCase().includes(q));
  renderProducts(list);
}

function renderProducts(list){
  productsGrid.innerHTML = '';
  list.forEach(p=>{
    const disabled = p.stock==='no';
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
      <img class="product-image" src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
      <div class="product-info">
        <h3 class="product-title">${p.name}</h3>
        <p class="product-description">${p.description}</p>
        <div class="product-price">Rs. ${p.price}</div>
        <button class="${disabled? 'out-of-stock':'add-to-cart'}" ${disabled? 'disabled':''} data-id="${p.id}">
          ${disabled? 'Out of Stock' : 'Add to Cart'}
        </button>
      </div>
    `;
    productsGrid.appendChild(card);
  });

  // attach add buttons
  document.querySelectorAll('.add-to-cart').forEach(btn=>{
    btn.addEventListener('click', ()=> {
      const id = Number(btn.getAttribute('data-id'));
      addToCart(id);
    });
  });
}

function addToCart(id){
  const prod = products.find(p=>p.id===id);
  if(!prod) return;
  const existing = cart.find(i=>i.id===id);
  if(existing) existing.qty++;
  else cart.push({...prod, qty:1});
  updateCartUI();
  showMessage(`${prod.name} added to cart!`,'success');
}

function updateCartUI(){
  cartItemsEl.innerHTML = '';
  let total = 0;
  cart.forEach(item=>{
    total += item.price * item.qty;
    const div = document.createElement('div');
    div.className = 'cart-item';
    div.innerHTML = `
      <div style="display:flex;gap:10px;align-items:center">
        <img src="${item.image}" width="70" height="70" style="object-fit:cover;border-radius:6px">
        <div>
          <strong>${item.name}</strong><br><small>Rs. ${item.price} x ${item.qty}</small>
        </div>
      </div>
      <div>
        <button onclick="changeQty(${item.id},-1)">-</button>
        <button onclick="changeQty(${item.id},1)">+</button>
        <button onclick="removeFromCart(${item.id})">ðŸ—‘</button>
      </div>
    `;
    cartItemsEl.appendChild(div);
  });
  cartCountEl.textContent = cart.reduce((s,i)=>s+i.qty,0);
  cartTotalEl.textContent = `Rs. ${total.toFixed(2)}`;
  floatingTotalEl.textContent = `Rs. ${total.toFixed(2)}`;
}

function changeQty(id,delta){
  const it = cart.find(i=>i.id===id);
  if(!it) return;
  it.qty += delta;
  if(it.qty <= 0) cart = cart.filter(i=>i.id!==id);
  updateCartUI();
}

function removeFromCart(id){
  cart = cart.filter(i=>i.id!==id);
  updateCartUI();
}

function checkout(){
  if(cart.length===0){ alert('Your cart is empty!'); return; }
  let msg = "ðŸ› Order details:\n";
  let total = 0;
  cart.forEach(i=>{ msg += `â€¢ ${i.name} x${i.qty} = Rs ${i.price*i.qty}\n`; total += i.price*i.qty; });
  msg += `\nTotal: Rs ${total}`;
  window.open(`https://wa.me/${PHONE}?text=${encodeURIComponent(msg)}`,'_blank');
}

function setupEvents(){
  document.getElementById('cartIcon').addEventListener('click', ()=> toggleCart(true));
  document.getElementById('floatingCartBtn').addEventListener('click', ()=> toggleCart(true));
  document.getElementById('closeCart').addEventListener('click', ()=> toggleCart(false));
  overlay.addEventListener('click', ()=> toggleCart(false));
  document.getElementById('checkoutBtn').addEventListener('click', checkout);
  document.getElementById('refreshBtn').addEventListener('click', ()=> renderProducts(products));
  document.getElementById('gridViewBtn').addEventListener('click', ()=> { currentView='grid'; document.getElementById('gridViewBtn').classList.add('active'); document.getElementById('listViewBtn').classList.remove('active'); renderProducts(products);});
  document.getElementById('listViewBtn').addEventListener('click', ()=> { currentView='list'; document.getElementById('listViewBtn').classList.add('active'); document.getElementById('gridViewBtn').classList.remove('active'); /* simple switch: hide grid, keep single-column list style */});
  searchBox.addEventListener('input', ()=> applyFilter(document.querySelector('.category-btn.active') ? document.querySelector('.category-btn.active').dataset.filter : 'all'));
}

function toggleCart(show){
  cartPopup.classList.toggle('active', show);
  overlay.classList.toggle('active', show);
  document.body.style.overflow = show ? 'hidden' : 'auto';
}

function showMessage(text,type='success'){
  const d = document.createElement('div');
  d.className = type==='success' ? 'success-message' : 'error-message';
  d.textContent = text;
  document.body.prepend(d);
  setTimeout(()=> d.remove(), 2500);
}

/* initialize */
init();
</script>
</body>
</html>
